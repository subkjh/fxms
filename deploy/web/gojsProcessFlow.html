<!DOCTYPE html>
<html>
<head lang="en">
<meta charset="UTF-8">

<script src="js/ext/gojs/go.js"></script>
<script src="js/ext/gojs/Figures.js"></script>

<script src="js/fxms.js"></script>

<script>
	$(function(param) {

		console.log(param);

		initEvent();
		
		var userId = window.localStorage.getItem("FXMSTEST.user.id");
		var userPwd = window.localStorage.getItem("FXMSTEST.user.pwd");
		
		let fxmsDiagram
		let fxmsGojs;
		let fxms = new FxMS(userId, userPwd, showDiagram);

		function showDiagram(session) {
			fxmsDiagram = new FxmsDiagram(fxms);
			fxmsDiagram.showDiagram('goDiv', 1, function(isOk, retObj) {
				if (isOk) {
					fxmsGojs = retObj;
				}
			});
		}

		function initEvent() {
			document.getElementById('save').addEventListener(
					'click',
					function(e) {
						fxmsDiagram.save(1, fxmsGojs.getNodeList(), fxmsGojs
								.getLinkList());

					});
		}

	});
</script>

<style>
</style>

</head>
<body>

	<h2>프로세스 플로우</h2>
	<form></form>

	<div id="goDiv"
		style="border: 1px solid black; width: 100%; height: 600px; position: relative; -webkit-tap-highlight-color: rgba(255, 255, 255, 0);"></div>

	<button class="button button2" id='save'>위치저장</button>

</body>
</html>